# frozen_string_literal: true

# Copyright 2021 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Auto-generated by gapic-generator-ruby. DO NOT EDIT!

require "gapic/rest"
require "google/cloud/compute/v1/compute_small_pb"

module Google
  module Cloud
    module Compute
      module V1
        module RegionInstanceGroups
          module Rest
            ##
            # REST service stub for the RegionInstanceGroups service.
            #
            class ServiceStub
              ##
              # Create a new RegionInstanceGroups REST service stub object.
              #
              # @param endpoint [String]
              #   The hostname or hostname:port of the service endpoint.
              #   Defaults to `"localhost:7469"`.
              #
              # @param credentials [Google::Auth::Credentials]
              #   Credentials to send with calls in form of a googleauth credentials object.
              #   (see the [googleauth docs](https://googleapis.dev/ruby/googleauth/latest/index.html))
              #
              def initialize endpoint:, credentials:
                @client_stub = ::Gapic::Rest::ClientStub.new endpoint: endpoint, credentials: credentials
              end

              # Service calls

              ##
              # Returns the specified instance group resource.
              #
              # @param request_pb [::Google::Cloud::Compute::V1::GetRegionInstanceGroupRequest]
              #   A request object representing the call parameters. Required.
              # @param options [::Gapic::CallOptions]
              #   Overrides the default settings for this call, e.g, timeout, retries, etc. Optional.
              # @return [::Google::Cloud::Compute::V1::InstanceGroup]
              def get request_pb, options:, &block
                request_json = JSON.parse ::Google::Cloud::Compute::V1::GetRegionInstanceGroupRequest.encode_json(request_pb)

                uri = "/compute/v1/projects/#{request_pb.project}/regions/#{request_pb.region}/instanceGroups/#{request_pb.instance_group}"

                result_json = @client_stub.make_get_request(
                  uri:     uri,
                  options: options,
                  &block
                )

                ::Google::Cloud::Compute::V1::InstanceGroup.decode_json result_json[:body], { ignore_unknown_fields: true }
              end

              ##
              # Retrieves the list of instance group resources contained within the specified region.
              #
              # @param request_pb [::Google::Cloud::Compute::V1::ListRegionInstanceGroupsRequest]
              #   A request object representing the call parameters. Required.
              # @param options [::Gapic::CallOptions]
              #   Overrides the default settings for this call, e.g, timeout, retries, etc. Optional.
              # @return [::Google::Cloud::Compute::V1::RegionInstanceGroupList]
              def list request_pb, options:, &block
                request_json = JSON.parse ::Google::Cloud::Compute::V1::ListRegionInstanceGroupsRequest.encode_json(request_pb)

                uri = "/compute/v1/projects/#{request_pb.project}/regions/#{request_pb.region}/instanceGroups"

                result_json = @client_stub.make_get_request(
                  uri:     uri,
                  options: options,
                  &block
                )

                ::Google::Cloud::Compute::V1::RegionInstanceGroupList.decode_json result_json[:body], { ignore_unknown_fields: true }
              end

              ##
              # Lists the instances in the specified instance group and displays information about the named ports. Depending on the specified options, this method can list all instances or only the instances that are running. The orderBy query parameter is not supported.
              #
              # @param request_pb [::Google::Cloud::Compute::V1::ListInstancesRegionInstanceGroupsRequest]
              #   A request object representing the call parameters. Required.
              # @param options [::Gapic::CallOptions]
              #   Overrides the default settings for this call, e.g, timeout, retries, etc. Optional.
              # @return [::Google::Cloud::Compute::V1::RegionInstanceGroupsListInstances]
              def list_instances request_pb, options:, &block
                request_json = JSON.parse ::Google::Cloud::Compute::V1::ListInstancesRegionInstanceGroupsRequest.encode_json(request_pb)

                uri = "/compute/v1/projects/#{request_pb.project}/regions/#{request_pb.region}/instanceGroups/#{request_pb.instance_group}/listInstances"
                body = request_pb.region_instance_groups_list_instances_request_resource.to_json

                result_json = @client_stub.make_post_request(
                  uri:     uri,
                  body:    body,
                  options: options,
                  &block
                )

                ::Google::Cloud::Compute::V1::RegionInstanceGroupsListInstances.decode_json result_json[:body], { ignore_unknown_fields: true }
              end

              ##
              # Sets the named ports for the specified regional instance group.
              #
              # @param request_pb [::Google::Cloud::Compute::V1::SetNamedPortsRegionInstanceGroupRequest]
              #   A request object representing the call parameters. Required.
              # @param options [::Gapic::CallOptions]
              #   Overrides the default settings for this call, e.g, timeout, retries, etc. Optional.
              # @return [::Google::Cloud::Compute::V1::Operation]
              def set_named_ports request_pb, options:, &block
                request_json = JSON.parse ::Google::Cloud::Compute::V1::SetNamedPortsRegionInstanceGroupRequest.encode_json(request_pb)

                uri = "/compute/v1/projects/#{request_pb.project}/regions/#{request_pb.region}/instanceGroups/#{request_pb.instance_group}/setNamedPorts"
                body = request_pb.region_instance_groups_set_named_ports_request_resource.to_json

                result_json = @client_stub.make_post_request(
                  uri:     uri,
                  body:    body,
                  options: options,
                  &block
                )

                ::Google::Cloud::Compute::V1::Operation.decode_json result_json[:body], { ignore_unknown_fields: true }
              end
            end
          end
        end
      end
    end
  end
end
